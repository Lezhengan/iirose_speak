# 蔷薇花园聊天次数插件

欢迎使用蔷薇花园聊天次数插件，这是一个为 XCWQW233 的 [iirosebot](https://github.com/XCWQW1/iirosebot) 机器人框架开发的插件。该插件用于记录和管理用户在 "蔷薇花园" 中的聊天次数。

## 特性

- 记录用户每天的聊天次数
- 通过 `/cu` 指令查询用户当天的聊天次数
- 每天自动重置聊天次数
- 聊天记录保存在文本文件中以便数据持久化

## 安装要求

确保您具备以下条件：

- 使用 **Python 3.11** 版本
- 安装以下库：
  - `loguru`
  - `asyncio`
  - `API` 模块来自于 `iirosebot`

请确保您已经安装了上述依赖库，可以使用以下命令安装缺失的库：

```bash
pip install loguru
```

## 使用方法

1. **加入蔷薇花园聊天次数插件**: 将本插件代码整合到您的 iirosebot 项目中，确保其与其他模块正常配合使用。
  
2. **配置**: 按照需要修改配置文件，确保插件可以正常读取和写入聊天次数数据。

3. **运行**: 启动您的 iirosebot，插件将在登录成功后自动执行初始化逻辑，并开始记录聊天次数。

4. **使用指令**: 在聊天中输入 `/cu` 指令，它将返回您当天的发言次数。

## 插件开发说明

此插件的主要功能包括：

- `load_chat_count()`: 从文本文件加载先前的聊天记录。
- `update_chat_count(user_id)`: 更新指定用户的聊天次数。
- `export_to_txt()`: 将当前的聊天记录导出到文本文件中。
- `check_chat_count(Message)`: 处理 `/cu` 指令，返回当前用户的聊天次数。
- `reset_chat_count()`: 重新设置用户聊天次数为零，并导出文件。
- `schedule_reset()`: 定时检查并在每天0点重置聊天次数。
- `on_init()`: 初始化函数，在插件启动时自动执行。

## 注意事项

- 请确保您的环境与本插件所需的 Python 版本和库相兼容。
- 该插件仅适用于 XCWQW233 的 iirosebot，如有其他需求，请自行修改代码。
  
## 许可证

本项目基于 MIT 许可证，详情请查看 LICENSE 文件。

如果您在使用过程中有任何问题，请打开 Issue，我们将尽快为您解答。感谢您的支持！
